General TODO:
    - Better flags support. The CSS and JS maps will be hand-maintained (keep
      them in their own files if we can...)

    - Make all logging consistent and useful.

    - More bzr branches. Consider splitting out emotes. Add everything to a
      repository, with a private branch for the .pem or something. Use branches
      more, for big development projects (like Opera!) so we don't keep stuff
      out of VCS so much.

    - MAJOR CLEANUP after Opera release. The codebase is sprawling.
        - Move Firefox files to firefox/. Make folders for our scripts as well-
          bin/ would be nice.

        /files
        /files/betterponymotes.update.rdf
        /files/chrome-updates.xml
        /files/opera-updates.xml # I think?
        # Would like to rename all the above:
        #    /index.html
        #    /bpm/betterponymotes_3.30.xpi
        #    /bpm/firefox-updates.rdf
        # etc.
        /bin # Scripts
        /chrome
        /firefox
        /opera
        /emotes
        /data # CSS files

        - Sort out codebase. There are duplicates and things- perhaps a template
          system would work? Maybe we should just separate functionality better.

          # These files are fairly shared.
          /scripts/process.js
          /scripts/process-delayed.js # Will be nearly identical to above- FIXME
          /scripts/monitor-mo.js
          /scripts/monitor-dom.js

          # The css-support files are different enough where we can't really
          # share them, unfortunately.
          /firefox/lib/main.js
          /chrome/background.js
          /chrome/css-support.js
          /opera/background.js
          /opera/includes/css-support.js

        - Find a better way to handle injecting emote-map.js into Opera. "make"
          works for now, but this just won't do for long.

    - Fully automate the update process. We really need to stop editing XML
      files manually... a little Python will do fine; just go write it.

Chrome:
    - Make options work more nicely- reloading properly on all pages.
        - localStorage events might work from background.js
    - Try to make options.html reasonably nice looking

Opera:
    - Consider doing settings updating via postMessage- also with Chrome.
        - Requires <style id="bpm-extracss"> so it can be removed...
    - Spend some time fixing up options.html, and copying improvements to Chrome.
        - The code is also a mess.

Update process:
    - $ bin/version.py set -v [...]
    - Edit opera/config.xml
    - Edit chrome-updates.xml
    - Edit opera-updates.xml
    - $ make
    - $ make unpack-xpi
    - Edit xpi/install.rdf
    - $ make pack-xpi

    <em:updateKey>
        MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCZnk8XNNC6+pmDqxY/5CzREJXj
        BUY2JzvtcIMBH9gvyq7ZoOdCHIxm2rew7jZ76zdJfKlsUXI2tEdvR5C5PI4NBCw7
        PGm6yzGLSn8/cG7tG9XvpnyxGAX8TfQyV602NhAucqJXYGvCNePalZGU7FJbeJc1
        5JjoU+fv8mFBK/QTAwIDAQAB
    </em:updateKey>
